# 十、进程、线程、集群

## 1. process 模块

### (1) process API

```js
定义：import process from 'process'
属性：操作系统属性：
     process.arch                                      //返回当前Node进程所在操作系统的CPU架构
     process.platform                                  //返回当前Node进程所在操作系统平台
     用户环境属性：
     process.env                                       //返回当前Node进程所在的用户环境对象
     Node 属性：
     process.release                                   //返回当前Node进程使用的Node版本对象
     process.version                                   //返回当前Node进程使用的Node版本
     process.versions                                  //返回当前Node进程使用的Node及其依赖项版本对象
     process.execPath                                  //当前当前Node进程的可执行文件的绝对路径
     process.config                                    //返回当前Node进程的可执行文件的只读配置对象
     进程属性：
     process.pid                                       //返回当前Node进程唯一标识
     process.ppid                                      //返回当前Node进程的父进程的pid
     process.title                                     //返回当前Node进程标题
     process.argv                                      //返回当前Node进程启动时传入的命令行参数(第一个参数是process.execPath,第二个参数是正在执行的JS文件路径)
     process.execArgv                                  //返回当前Node进行启动时传入的一组特定于Node命令行选项,不会出现在process.argv,可用于衍生与父进程具有相同执行环境的子进程
     process.debugPort                                 //返回当前Node进程的调试端口
     process.exitCode                                  //返回/设置当前Node进程的退出码
     process.report                                    //返回当前Node进程的诊断报告对象{compact,directory,filename,}
     process.noDeprecation                             //返回当前Node进程是否设置了--no-deprecation标志
     process.throwDeprecation                          //返回当前Node进程是否设置了--throw-deprecation标志
     process.traceDeprecation                          //返回当前Node进程是否设置了--trace-deprecation标志
     IPC 通道属性：
     process.channel                                   //返回当前Node进程对IPC通道的引用,无则返回undefined
     process.connected                                 //返回当前Node进程使用的IPC通过是否仍连接
     输入输出属性：
     process.stdin                                     //返回当前Node进程的标准输入流
     process.stdin.fd                                  //返回当前Node进程的标准输入流的底层文件名描述符
     process.stdout                                    //返回当前Node进程的标准输出流
     process.stdout.fd                                 //返回当前Node进程的标准输出流的底层文件名描述符
     process.stderr                                    //返回当前Node进程的错误输出流
     process.stderr.fd                                 //返回当前Node进程的错误输出流的底层文件名描述符
方法：身份标识方法：
     process.getuid()                                  //返回当前Node进程的数字用户标识
     process.setuid(id)                                //无返回值,设置当前Node进程的数字用户标识
     process.geteuid()                                 //返回当前Node进程的数字有效用户身份
     process.seteuid(id)                               //无返回值,设置当前Node进程的数字有效用户身份
     process.getgid()                                  //返回当前Node进程的数字群组标识
     process.setgid(id)                                //无返回值,设置当前Node进程的数字群组标识
     process.getegid()                                 //返回当前Node进程的数字有效群组标识
     process.setegid(id)                               //无返回值,设置当前Node进程的数字有效群组标识
     process.getgroups()                               //返回当前Node进程的带有补充组ID的数组
     process.setgroups(groups)                         //无返回值,设置当前Node进程的带有补充组ID的数组
     process.initgroups(user,extraGroup)               //无返回值,读取/etc/group文件并使用用户所属的所有组初始化组访问列表 
     Node 进程方法：
     process.hrtime.bigint()                           //返回当前Node进程已经运行的纳秒数
     process.uptime()                                  //返回当前Node进程已经运行的秒数
     process.cpuUsage([preVal])                        //返回当前Node进程的用户和系统CPU时间使用情况(微秒)
     process.memoryUsage()                             //返回当前Node进程的内存使用量对象(字节)
     process.resourceUsage()                           //返回当前Node进程的资源使用情况
     process.cwd()                                     //返回当前Node进程的当前工作目录
     process.chdir(directory)                          //无返回值,更改当前Node进程的当前工作目录
     process.dlopen(module,filename,[flags])           //无返回值,动态加载共享对象
     process.nextTick(cb,[...args])                    //无返回值,将回调cb添加到下一个事件循环
     process.emitWarning(warning,[options])            //无返回值,触发自定义或特定于应用程序的进程警告
     process.emitWarning(warning,[type,[code]],[ctor]) //无返回值,触发自定义或特定于应用程序的进程警告
     process.kill(pid,[signal])                        //无返回值,将可选参数signal信号发送到pid标识的进程
     process.abort()                                   //无返回值,中止当前Node进程并生成一个核心文件
     process.exit([code])                              //无返回值,指定当前Node进程以退出码code同步终止进程,即使仍有未完成的异步操作,大多数情况下没必要调用该方法,事件循环中没有待处理工作则Node进程会自行退出
     process.setUncaughtExceptionCaptureCallback(fn)   //无返回值,设置当前Node进程发生未捕获异常时的回调函数
     process.hasUncaughtExceptionCaptureCallback()     //返回当前Node进程是否已使用process.setUncaughtExceptionCaptureCallback()设置回调
     IPC 通道方法：
     process.send(message,[sendHandle,[options]],[cb]) //无返回值,当前Node进程向父进程发送消息
     process.disconnect()                              //无返回值,关闭当前Node进程通往父进程的 IPC 通道    
```

### (2) process 事件

```js
process 事件：
beforeExit               //当前 Node 进程清空其事件循环且没有额外的工作要安排时触发
exit                     //当前 Node 进程即将关闭时触发(code)
warning                  //当前 Node 进程触发警告时触发(name,message,stack)

IPC 通道事件：
message                  //当前 Node 进程收到父进程发送的消息时触发
disconnect               //当前 Node 进程使用的 IPC 通道关闭时触发

worker 事件：
worker                   //当前 Node 进程创建新的 worker 线程时触发(worker)

未捕获的错误事件：
uncaughtException        //当未捕获的 JS 异常一直冒泡回到事件循环时触发(err,origin)
uncaughtExceptionMonitor //当 uncaughtException 要触发时在其之前触发(err,origin)
multipleResolves         //当 Promise 解决了多次、解决后拒绝、拒绝了多次、拒绝后解决时触发,用于跟踪应用程序使用Promise的潜在错误(type,promise,value)
rejectionHandled         //当 Promise 被拒绝且错误句柄被附加到晚一轮的事件循环时触发(promise)
unhandledRejection       //当 Promise 被拒绝且在事件循环的一个轮询内没有错误句柄附加到承诺时触发(reason,Promise)

信号事件
```

## 2. child_process 模块

### child_process API

```js
定义：import child_process from 'child_process'
属性：
方法：
```

## 3. worker_threads 模块

```js
定义：import worker_threads from 'worker_threads'
属性：
方法：
```

## 4. cluster 模块

```js
定义：import cluster from 'cluster'
属性：
方法：
```
