# 十、设备事件

平板电脑和智能手机的普及，为用户和浏览器交互引入了一种新的方式，设备事件可以让开发者确定用户在怎样使用设备

## 1\. 设备查看模式事件

```javascript
设备查看模式事件：
orientationchange //设备查看模式改变时在window对象上触发
```
event事件对象不包含任何有价值的信息，因为唯一相关信息是通过`window.orientation属性`获得的

```javascript
属性:window.orientation //返回当前设备的查看模式(0:肖像模式,90:向左旋转的横向模式,-90:向右旋转的横向模式)
```
### \(1\) 监控设备查看模式

```javascript
window.addEventListener('load', function(e){
  console.log('设备初始查看模式：' + window.orientation);
});

window.addEventListener('orientationchange', function(e){
  console.log('设备当前查看模式：' + window.orientation);
});
```
## 2\. 设备朝向事件

```javascript
设备朝向事件：
deviceorientation //设备在三维空间内的朝向变化时在window对象上触发
```
设备在三维空间内靠x、y、z轴定位，x轴从左往右，y轴从下往上，z轴从后往前，设备静止放在水平表面时，三个值均为0，可以根据Event对象的属性，得知设备在三维空间内的朝向，重新排列或修改屏幕上的元素

```javascript
e.alpha             //返回设备围绕z轴旋转时,y轴的度数差(0~360)
e.beta              //返回设备围绕x轴旋转时,z轴的度数差(-180~180)
e.gamma             //返回设备围绕y轴旋转时,z轴的度数差(-90~90)
e.absolute          //返回布尔值,设备是否返回绝对值
e.compassCalibrated //返回布尔值,设备的指南针是否校准过
```
### \(1\) 监控设备朝向

```javascript
window.addEventListener('deviceorientation', function(e){
  console.log("设备朝向：(" + e.alpha + ", " + e.beta + ", " + e.gamma + ")");
});
```
## 3\. 设备移动事件

```javascript
设备移动事件：
devicemotion //设备移动时在window对象上触发
```
可以根据Event对象的属性，得知设备是否正在往下掉，或者被走着的人拿在手里

```javascript
e.rotationRate                 //返回对象,包含表示方向的alpha,beta,gamma属性
e.accelerationIncludingGravity //返回对象,包含表示方向上加速度的x,y,z属性,有重力
e.acceleration                 //返回对象,包含表示方向上加速度的x,y,z属性,无重力
e.interval                     //返回毫秒时间值
```
### \(1\) 监控设备移动

```javascript
window.addEventListener('devicemotion', function(e){
  const r = e.rotationRate;
  if(r !== null){
      console.log("设备移动：(" + r.alpha + ", " + r.beta + ", " + r.gamma + ")");
  }
});
```

