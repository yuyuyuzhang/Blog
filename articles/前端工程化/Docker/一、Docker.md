# 一、Docker

## 1. Docker 概念

Docker 是一个用于`开发、发布、运行应用程序的开放平台`，Docker 要做的就是将各种软件打包成一个集装箱（镜像），然后分发，并且在运行的时候可以相互隔离

### (1) 镜像

`镜像是一个只读的文件和文件夹组合`，包含了容器运行时需要的所有基础文件和配置信息，是`容器启动的先决条件`，镜像提供了容器运行时所需的程序、软件库、资源、配置等静态数据，不包含任何动态数据，镜像内容在构建后不会被改变

* **自己创建镜像**：通常`一个镜像是基于一个基础镜像制作的`，可以在基础镜像上添加一些自自定义功能，例如可以基于 centos 镜像制作自己的业务镜像，首先安装 nginx 服务，让部署应用程序，最好做一些自定义配置，这样一个业务镜像就做好了
* **从功能镜像仓库拉取别人制作好的镜像**：一些常用的软件或系统都会有官方已经制作好的镜像，例如 nginx、centos、mysql 等等，可以去 `Docker Hub` 搜索和下载

### (2) 容器

`容器是镜像的运行实体，容器运行着真正的应用进程`，拥有`初建、运行、停止、暂停、删除` 5 种状态

虽然容器本质上是主机上运行的一个进程，但容器有自己的独立命名空间和资源限制，也就是说容器内部无法看到主机的进程、环境变量、网络等信息，这就是容器与直接运行在主机上的进程的区别

### (3) 仓库

`仓库用于存储和分发镜像`

* **公共镜像仓库**：Docker 官方的公共镜像仓库是 `Docker Hub`，不仅拥有很多应用程序或者操作系统的官方镜像，还拥有很多组织或者个人开发的镜像，都可以供我们免费下载、存放、研究、使用
* **私有镜像仓库**：用户还可以创建自己的私有镜像仓库

![镜像、容器、仓库关系图]()

## 2、 Docker 架构

### (1) 开放容器标准（Open Container Initiative，OCI）

容器技术的发展过程中爆发了容器标准之争，容器编排技术之争，最终爆发了容器大战

由此诞生了开放容器标准 OCI，OCI 是一个轻量、开放的治理结构，目前主要有 2 个标准文档：容器镜像标准（image spec）、容器运行时标准（runtime spec）

### (2) Docker 架构

Docker 在容器战争中改变了一些技术架构，最终形成了如下的`客户端/服务端的 CS 架构`，客户端负责发送操作指令，服务端负责接收和处理指令

![Docker架构]()

* **Docker 客户端**：Docker 用户与 Docker 服务端交互有多种方式，`Docker 命令`、`Restful API` 等
* **Docker 服务端**：Docker 服务端是 Docker 所有后台服务的统称，其中后台管理进程 dockerd 负责响应和处理来自 Docker 用户的请求，然后将客户端的请求转化为 Docker 的具体操作，例如镜像、容器、网络和挂载卷等具体对象的操作和管理
