# 一、H5 开发

[[_TOC_]]

## 1. 移动端 APP

### (1) 原生应用（native application，native App）

原生 App 是专门为`特定手机平台`开发的应用程序，无法在其他平台运行

原生 App 使用`与手机操作系统相同的语言`，iOS 的原生 App 使用 Objective-C 语言或 Swift 语言，安卓使用 Java 语言或 Kotlin 语言

#### ① 优点

* 原生 APP 跟底层系统的语言和技术模型一致，因此性能和用户体验都很好
* 原生 APP 可以使用系统的`所有硬件和软件 API`，能充分发挥系统的潜力，例如 GPS、摄像头、麦克风、加速计、通知推送等等

#### ② 缺点

* 原生 APP 成本较高，每个手机平台都要建立一个独立的开发团队，大公司一般都有 iOS 和安卓两个开发团队，如果出现第三个平台（华为鸿蒙 OS），就要组建第三个团队，成本就更高
* 原生 App 使用底层操作系统的语言，都是很重的编译型语言，开发和调试成本相对较高，时间周期长
* 原生 App 必须下载安装才能使用，只要升级版本，就必须重新下载安装。用户往往不愿意更新版本，厂商被迫不得不长期支持很久以前的旧版本

### (2) Web 应用（web application，web APP）

Web App 是使用`网页`做成的应用程序，必须在`浏览器`中使用

Web App 主要使用 HTML、CSS、JS 等网页技术，2008 年，w3c 组织发布了 HTML 5，该版本大大增强了网页的功能，使得网页可以当作`应用程序`使用，而不仅仅是展示文字和图片，这就是 Web App 的由来

#### ① 优点

* 不需要下载安装，打开浏览器就能使用，而且总是使用最新版本
* 对于开发者来说，Web App 写起来比较快，调试容易，不需要应用商店的批准就能发布

#### ② 缺点

* Web APP 性能不如原生 App，因为网页通过浏览器渲染，因此不适合做性能要求较高的页面
* Web APP 无法充分利用系统的硬件 API，因为浏览器提供的 Web API 很有限（目前只有相机、GPS、电池等少数几个），大部分系统硬件都不能通过网页访问，也无法直接读取硬盘文件
* Web APP 使用上远不如原生 APP 方便，因为 Web App 需要打开浏览器才能使用，这意味着用户必须记住如何导航到它，要么直接输入网址，要么翻找书签

### (3) 混合应用（hybrid application，hybrid App）

混合 APP 就是原生 APP 和 Web APP 和结合，壳是原生 APP，但是里面放的是网页，可以理解成混合 APP 里面隐藏了一个浏览器，用户看到的实际上是隐藏浏览器渲染出来的网页

#### ① 混合 APP 架构

* 容器
  
  混合 APP 的原生外壳

* 内部隐藏的浏览器
  
  通常使用系统提供的`网页渲染控件 WebView`，也可以自己内置一个浏览器内核

* 混合 APP 的架构
  
  从上到下分为三层：HTML5 网页层、网页引擎层（本质上是一个隔离的浏览器实例）、容器层

#### ② API Bridge

混合 APP 的外层容器提供了 API Bridge，API Bridge 往往以 `JS` 语言提供，方便网页调用，所以又称为 `JSbridge`，API Bridge 充当底层 API 的中介，允许内部的网页调用底层系统的`所有硬件和软件 API`

API Bridge 就是容器在网页和底层 API 接口之间建立了一座桥梁让双方通信，容器一旦接收到网页的请求，就根据请求去调用底层系统的 API，然后再返回结果给网页

不同容器的 API Bridge 是不一样的，为某个容器写的网页，不能放在另一个容器使用，也无法在浏览器使用，除非网页脚本做了兼容处理

#### ③ 优点

* 混合 APP 是跨平台的，因为 Web 技术是跨平台的，开发者只写一次页面，就可以支持多个平台
* 混合 APP 具有灵活性，一方面，混合 APP 很容易加载外部的 H5 页面，实现 APP 的插件结构，另一方面，Web 页面可以方便地调用外部的 Web 服务
* 混合 APP 开发方便，Web 页面的调试和创建，远比原生控件简单省时，页面的更新也很容易，只需在服务器上发布新版本，触发容器内更新就可以了

#### ④ 缺点

* 混合 APP 的性能不是很好，因为存在网页引擎的中间层，不仅不如原生 APP，而且由于 WebView 不是全功能浏览器，可能比 Web APP 都要慢一些
* 混合 APP 的体验不如原生 APP，因为夜间跨平台，就无法使用特定平台提供的功能，例如早期的安卓有物理的后退按钮，苹果就没有

### (4) 微信小程序

微信小程序可以看做是针对特定容器的`混合 APP` 开发，微信本身是一个容器，开放自己的接口 JSbridge，外部开发者使用规定的语法编写页面，容器可以动态加载这些页面

* 微信小程序对于微信官方的好处是，扩展了功能和应用场景，吸引外部开发者加入，繁荣了生态
* 微信小程序对于外部开发者的好处是，有了流量入口，可以直接调用微信的各种功能例如支付

## 2. 移动端开发

### (1) 原生 APP 技术栈

原生 APP 技术栈就是开发`原生 APP` 的技术，也就是只能用于特定手机平台的开发技术

例如安卓平台的 Java 技术栈，iOS 平台的 Object-C 技术栈或 Swift 技术栈

### (2) 混合 APP 技术栈

混合 APP 技术栈就是开发`混合 APP` 的技术，也就是将 Web 网页放在特定容器中，然后再编译成各平台的`原生 APP`，因此混合 APP 技术栈就是 `Web 技术栈 + 容器技术栈`

例如 PhoneGap、Cordova、Ionic

### (3) 跨平台 APP 技术栈

跨平台 APP 技术栈就是使用一种技术同时`支持多个手机平台`，跨平台 APP 技术栈不使用 Web 技术，而是使用自己语法编写的 UI 层，然后编译成各平台的`原生 APP`，因此跨平台 APP 技术栈就是`容器技术栈`

例如 React Native、Xamarin、Flutter

## 3. 

①②③④⑤⑥⑦⑧⑨⑩
