# 三、身份认证技术

[[_TOC_]]

## 1. 身份认证技术

**由来**：除了使用加密技术确保通信传输的机密信息不会被泄露以外，还需要身份认证技术确认通信双方的身份，因为无论是客户端还是服务器都有可能被伪造

#### ① 根据所知道的信息进行认证

利用密码认证的方式

#### ② 根据所拥有的信息进行认证

利用身份证、手机号码等信息认证的方式

#### ③ 根据独一无二的体态特征进行认证

利用指纹、视网膜等个人特有的生物特征认证的方式

## 2. HTTP 的身份认证技术

### (1) BASIC 认证

① 客户端发送 HTTP 请求，请求需要认证的资源

② 服务器返回状态码 `401 Authorization Required`，响应首部字段 `WWW-Authenticate` 包含认证方式 (Basic)、realm 字符串

③ 客户端收到服务器发来的 Basic 认证质询时，将`用户 ID 和密码`以冒号 `:` 连接然后经过 Base64 编码处理，再通过 `Authorization` 字段告知服务器

④ 服务器收到认证信息后，如验证通过，则返回状态码 200 OK

![BASIC](../../../images/计算机网络/网络安全/身份认证技术/BASIC.png)

### (2) DIGEST 认证

① 客户端发送 HTTP 请求，请求需要认证的资源

② 服务器返回状态码 `401 Authorization Required`，响应首部字段 `WWW-Authenticate` 包含认证方式 (Digest)、realm 字符串、质询码 nonce (生成的随机数)

③ 客户端收到服务器发来的 Digest 认证质询时，由质询码 nonce 通过 MD5 算法计算出响应码 response，再将包含 realm、nonce、response、uri (请求 URI)、username (realm 限定范围内可进行认证的用户名) 这 5 个字段的 `Authorization` 字段告知服务器

④ 服务器收到认证信息后，如验证通过，则返回状态码 200 OK

![DIGEST](../../../images/计算机网络/网络安全/身份认证技术/DIGEST.png)

### (3) 基于表单认证

① 客户端向服务器上的 Web 应用程序发送登陆信息，按登陆信息的验证结果认证`用户本人`

② 基于表单认证通过后，需要通过 Cookie 管理认证状态

![基于表单认证](../../../images/计算机网络/网络安全/身份认证技术/基于表单认证.png)

## 3. HTTPS 的身份认证技术

### (1) SSL 服务器认证

#### ① EV SSL 证书

EV SSL 证书有两个作用

* 一是证明作为通信一方的服务器真实存在且规范
* 二是证明该服务器背后运营的企业真实存在

#### ② SSL 服务器认证

SSL 服务器认证是利用 EV SSL 证书完成认证的方式，客户端凭借 EV SSL 证书可确认访问的服务器真实存在且规范，并且服务器背后运营的企业真实存在

![SSL服务器认证](../../../images/计算机网络/网络安全/身份认证技术/SSL服务器认证.png)

### (2) SSL 客户端认证

#### ① 客户端证书

* 客户端证书只能证明作为通信一方的客户端真实存在且规范
* 客户端证书无法证明用户本人的真实有效性，只要获得了安装有客户端证书的计算机的使用权限，也就意味着同时拥有了客户端证书的使用权限
* 从认证机构购买客户端证书需要支付一定费用

#### ② SSL 客户端认证

SSL 客户端认证是利用客户端证书完成认证的方式，服务器凭借客户端证书可确认访问自己的客户端

* 客户端发送 HTTP 请求，请求需要认证的资源
* 服务器返回 Certificate Request 报文，要求客户端提供客户端证书
* 用户选择将要发送的客户端证书后，客户端将选择好的证书信息以 Client Certificate 报文方式发送给服务器
* 服务器验证客户端证书通过后，领取证书内的`客户端的公钥`，然后开始 HTTPS 加密通信

![SSL客户端认证](../../../images/计算机网络/网络安全/身份认证技术/SSL客户端认证.png)

### (3) 双因素认证

① HTTPS 的 SSL 客户端认证：认证客户端计算机

② 基于表单认证：认证用户本人

双因素认证就是将 HTTPS 的 SSL 客户端认证和 HTTP 的基于表单认证结合起来的一种认证方式，通过双因素认证，就可以确认是用户本人正在使用匹配正确的计算机访问服务器
