<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="renderer" content="webkit" />
  <title>取消 Fetch 请求</title>
</head>
<body>
<script>

async function fetchApi(){
  const controller = new AbortController()
  setTimeout(() => controller.abort(), 1000)

  fetch('/user', {signal: controller.signal})
    .then(res => {})
    .catch(err => {
      if(err.name === 'AbortError'){
        console.log('fetch abort')
      } else{
        console.log('another error')
      }
    })
}
fetchApi()



</script>
</body>
</html>