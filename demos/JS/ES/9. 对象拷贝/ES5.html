<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>shallow copy</title>
</head>
<body>
<script>
//浅拷贝：Object属性值、Array元素若为基本类型，则拷贝值，若为引用类型，则拷贝引用
//深拷贝：Object属性值、Array元素无论为基本类型/引用类型，均拷贝值


//浅拷贝：仅适用于Array
function copy(arr){
  return arr.slice();
}

//浅拷贝：仅适用于Array
function copy(arr){
  return arr.concat();
}

//浅拷贝：仅适用于Object、Array
function copy(obj){
  var newObj = obj instanceof Array ? [] : {};
  for(var key in obj){
    newObj[key] = obj[key];
  }
  return newObj;
}

//深拷贝：适用于所有数据类型
function copy(obj){
  var type2 = Object.prototype.toString.call(obj);

  if(typeof obj !== 'object' || type2 === '[object Null]' || type2 === '[object Date]' || type2 === '[object RegExp]' || type2 === '[object Function]'){
    return obj;
  } else{
    var newObj = obj instanceof Array ? [] : {};
    for(var key in obj){
      newObj[key] = copy(obj[key]);
    }
    return newObj;
  }
}


var obj = {a: {b: {c: 1}}, d: new Date(), e: /1/g, f: function(){}};
var arr = [undefined, [null, true], NaN, [0, -0], {a: 1}];
var date = new Date();
var reg = /1/g;
var f = function(){};

var newObj = copy(obj);
var newArr = copy(arr);
var newDate = copy(date);
var newReg = copy(reg);
var newF = copy(f);

console.log(newObj);  //Object    {a: {b: {c: 1}}, d: Wed Oct 30 2019 14:02:20 GMT+0800 (中国标准时间), f: /1/g, f: function(){}};
console.log(newArr);  //Array     [undefined, [null, true], NaN, [0, -0], {a: 1}];
console.log(newDate); //Date      Wed Oct 30 2019 14:02:20 GMT+0800 (中国标准时间)
console.log(newReg);  //RegExp    /1/g
console.log(newF);    //Function  ƒ(){}

newObj.a.b.c = 2;
console.log(newObj);  //Object {a: {b: {c: 2}}, d: Wed Oct 30 2019 14:02:20 GMT+0800 (中国标准时间), f: /1/g, f: function(){}};
console.log(obj);     //Object {a: {b: {c: 1}}, d: Wed Oct 30 2019 14:02:20 GMT+0800 (中国标准时间), f: /1/g, f: function(){}};

</script>
</body>
</html>